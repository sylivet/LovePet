<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  @@include('layout/back_style.html')
  <title>樂寵後台管理</title>
</head>

<body class="backend">
  <nav class="navbar navbar-light" style="background-color: #FFC857;">
    <div class="container-fluid">
      <div class="d-flex align-items-center">
        <a href="index.html"><img class="ms-5" src="img/common/i_logo.png" alt="" style="max-width: 50px" /></a>
        <p class="navbar-brand ms-3">樂寵後台管理</p>
      </div>
      <div class="me-5"><a href="#">登出</a></div>
    </div>
  </nav>
  <div class="container mt-5">
    <div class="row">
      @@include('back_leftSide.html')
      <div class="col-10">
        <h2 class="mb-3">健檢套餐檢視</h2>
        <div class="d-flex justify-content-between mb-3">
          <select id="onshelf">
            <option value="All" selected>All</option>
            <option value="快速篩檢套餐">快速篩檢套餐</option>
            <option value="進階健檢套餐">進階健檢套餐</option>
            <option value="熟齡健檢套餐">熟齡健檢套餐</option>
          </select>
        </div>
        <table class="table table-striped table-hover text-center">
          <thead>
            <tr class="table-warning">
              <th>項目編號</th>
              <th>項目名稱</th>
              <th>價格</th>
              <th>適用對象</th>
              <th>套餐</th>
            </tr>
          </thead>
          <tbody class='data'>
          </tbody>
        </table>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script src="./js/orderNumber.js"></script>

    <script>
      axios.post("php/back_end_API/C_select.php").then((res) => {
        getData(res)
      })
      function getData(res) {
        for (let i = 0; i < res.data.length; i++) {

          let data = `
          <tr class="dataTable">
                <td style="display: none"><input value="${res.data[i].HEALTH_CHECK_ID}" name="HEALTH_CHECK_ID" disabled readonly></td>
                <td>${res.data[i].HEALTH_CHECK_ID}</td>
                <td>${res.data[i].LISTNAME}</td>
                <td>${res.data[i].PRICE}</td>
                <td>${res.data[i].TESTING_SUBJECT}</td>
                <td class="noShow">${res.data[i].SET_MENU_NAME}</td>
          </tr>
          `
          $('.data').append(data)
        }
      }
            // 搜尋bar
      $("#onshelf").on("change", function() {
				var value = $(this).val();
					if(value === "快速篩檢套餐"){
						$(".noShow").filter(function() {
								$(this).closest('.dataTable').toggle($(this).text().indexOf(value) != -1);			
						});
					}else if(value === "熟齡健檢套餐"){
						$(".noShow").filter(function() {
								$(this).closest('.dataTable').toggle($(this).text().indexOf(value) != -1);			
						});
					}else if(value === "進階健檢套餐"){
						$(".noShow").filter(function() {
								$(this).closest('.dataTable').toggle($(this).text().indexOf(value) != -1);			
						});
					}
          else{
            $(".noShow").filter(function() {
								$(this).closest('.dataTable').toggle($(this).text().indexOf(value) == -1);			
						});
          }
			});
      // axios.post("php/back_end_API/CA_select.php").then((res)=>{
      //   getData(res)
      // })
      // function getData(res){
      //   for(let i = 0; i< res.data.length; i++){

      //     let data = `
      //     <tr>
      //           <td style="display: none"><input value="${res.data[i].HEALTH_CHECK_ID}" name="HEALTH_CHECK_ID" disabled readonly></td>
      //           <td>${res.data[i].HEALTH_CHECK_ID}</td>
      //           <td>${res.data[i].LISTNAME}</td>
      //           <td>${res.data[i].PRICE}</td>
      //           <td>${res.data[i].TESTING_SUBJECT}</td>
      //     </tr>
      //     `
      //     $('.add').append(data)
      //   }
      // }


    </script>
</body>

</html>